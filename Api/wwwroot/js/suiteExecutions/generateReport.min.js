var executionsTable,chart=null;function GenerateReport(t){customSwal.fire({title:"Loading...",html:'<div style="min-height:150px"><div class="spinner"></div></div>',allowEscapeKey:!1,allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1,showCloseButton:!1,didOpen(){setTimeout(function(){$.ajax({type:"GET",url:"/SuiteExecutions/Get/"+t,dataType:"JSON",success:function(t){null!=chart&&chart.destroy();var e=document.getElementById("chart").getContext("2d");(chart=new Chart(e,{type:"doughnut",data:{labels:["Pass","Fail","Stop","Not run"],datasets:[{label:"Executions",backgroundColor:["rgba(95, 167, 88, 0.6)","rgba(215, 75, 61, 0.6)","rgba(255, 227, 81, 0.6)","rgba(114, 165, 217, 0.6)"],borderColor:["rgba(95, 167, 88, 0.6)","rgba(215, 75, 61, 0.6)","rgba(255, 227, 81, 0.6)","rgba(114, 165, 217, 0.6)"],data:[t.passExecutions,t.failExecutions,t.stopExecutions,t.notRunExecutions],borderWidth:2}]},options:{animation:{duration:2e3},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:t.businessProcess.name}}}})).canvas.parentNode.style.height="400px",chart.canvas.parentNode.style.width="400px",executionsTable=$("#executionsTable").DataTable({processing:!0,data:t.executions,buttons:[{extend:"excelHtml5",text:'<i class="fas fa-file-excel"></i>',titleAttr:"Export Excel",className:"btn btn-excel",exportOptions:{columns:[0,1,2,3,4,5,6]},sheetName:t.businessProcess.name},{extend:"pdf",text:'<i class="fas fa-file-pdf"></i>',titleAttr:"Export PDF",className:"btn btn-pdf",exportOptions:{columns:[0,1,2,3,4,5,6]},customize:function(t){t.content[1].margin=[80,0,80,0]}},{extend:"print",text:'<i class="fas fa-print"></i>',titleAttr:"Print",className:"btn btn-print",exportOptions:{columns:[0,1,2,3,4,5,6]}},{extend:"colvis",text:'<i class="fas fa-eye"></i>',titleAttr:"Show/Hide columns",className:"btn btn-colvis rounded-0",columns:[1,2,3,4,5,6]},{extend:"pageLength",text:'<i class="fas fa-list-alt"></i>',titleAttr:"Show/Hide Records",className:"btn btn-rowvis"},],columns:[{className:"text-center",defaultContent:"",searchable:!1,orderable:!1,autoWidth:!0,width:"30px"},{data:"testCase",name:"testCase",autoWidth:!0},{data:"executionDate",name:"executionDate",render:function(t,e,a){return new Date(a.executionDate).toLocaleString([],{hour12:!0})},autoWidth:!0},{data:"testEnvironment",name:"testEnvironment",render:function(t,e,a){return find(testEnvironmentCatalogue,parseFloat(a.testEnvironment)).text},autoWidth:!0},{data:"executor",name:"executor",autoWidth:!0},{data:"company",name:"company",autoWidth:!0},{data:"role",name:"role",autoWidth:!0},{data:"executionStatus",name:"executionStatus",render:function(t,e,a){return find(executionStatusCatalogue,parseFloat(a.executionStatus)).text},autoWidth:!0},{render:function(t,e,a){return'<div class="btn-group w-100"><button class="btn btn-kiwi" onclick="Download(\''+a.executionId+'\')" title="Download individual report"><i class="fa fa-download"></i></button></div>'},orderable:!1,searchable:!1,autoWidth:!0,width:"4%"}],lengthMenu:[[10,25,50,100,500,1e3],["10 records","25 records","50 records","100 records","500 records","1000 records"]],order:[],lengthChange:!1,dom:'<"row"<"col-sm-12 col-md-6"B><"col-sm-12 col-md-6"f>><"row"<"col-sm-12"tr>><"row"<"col-sm-12 col-md-7"i><"col-sm-12 col-md-5"p>>',scrollY:window.innerHeight-365,scrollX:!0,scrollCollapse:!0,paging:!0,retrieve:!0,language:{url:"../lib/datatables/json/English.json"},initComplete:function(){this.api().columns().every(function(t){var e=this;if($("input",this.footer()).on("keyup change clear search",function(){e.search()!==this.value&&e.search(this.value).draw()}),2==t){var a=$('<div class="input-group"></div>').appendTo($(e.footer()).empty()),o=$('<input type="date" class="form-control form-control-sm" disabled />').appendTo(a).on("change",function(){e.search()!==this.value&&e.search(this.value).draw()});$('<button class="btn btn-sm btn-caution" type="reset" disabled><i class="fa fa-times"></i></button>').appendTo(a).on("click",function(){o.val(""),e.search()!==this.value&&e.search(this.value).draw()})}if(3==t){var a=$('<div class="input-group"></div>').appendTo($(e.footer()).empty()),n=$('<select class="form-control form-control-sm"><option value="" disabled selected>Select environment...</option></select>').appendTo(a).on("change",function(){e.search()!==this.value&&e.search(this.value).draw()});e.data().unique().sort().each(function(t,e){var a=find(testEnvironmentCatalogue,parseFloat(t));n.append('<option value="'+a.text+'">'+a.text+"</option>")}),$('<button class="btn btn-sm btn-caution" type="reset"><i class="fa fa-times"></i></button>').appendTo(a).on("click",function(){n.val(""),e.search()!==this.value&&e.search(this.value).draw()})}if(7==t){var a=$('<div class="input-group"></div>').appendTo($(e.footer()).empty()),n=$('<select class="form-control form-control-sm"><option value="" disabled selected>Select status...</option></select>').appendTo(a).on("change",function(){e.search()!==this.value&&e.search(this.value).draw()});e.data().unique().sort().each(function(t,e){var a=find(executionStatusCatalogue,parseFloat(t));n.append('<option value="'+a.text+'">'+a.text+"</option>")}),$('<button class="btn btn-sm btn-caution" type="reset"><i class="fa fa-times"></i></button>').appendTo(a).on("click",function(){n.val(""),e.search()!==this.value&&e.search(this.value).draw()})}}),executionsTable.on("order.dt search.dt",function(){var t=1;executionsTable.cells(null,0,{search:"applied",order:"applied",page:"applied"}).every(function(e){this.data(t++),executionsTable.cell(e).invalidate("dom")})}).draw()}}),$("#reportModal").modal("show"),customSwal.close()},error:function(){executionsTable.ajax.reload(null,!1),customSwal.fire("Incorrect","No test suite execution info found!","error")}}),$("#executionsTable tfoot th").each(function(t){var e=$(this).text().toLowerCase();0!=t&&2!=t&&3!=t&&7!=t&&8!=t&&$(this).html('<input type="search" class="form-control form-control-sm" placeholder="Filter by '+e+'..." />')})},2e3)}})}$("#reportModal").on("shown.bs.modal",function(){executionsTable.columns.adjust().responsive.recalc()});